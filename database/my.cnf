# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.

[client]
port = 3306
socket = /var/run/mysqld/mysqld.sock
default-character-set=utf8

[mysql]
default-character-set=utf8
# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.

[client]
port = 3306
socket = /var/run/mysqld/mysqld.sock
default-character-set=utf8

[mysql]
default-character-set=utf8

[mysqld]
server-id=1
default-time-zone = '+8:00'  #时区
innodb_buffer_pool_size=5G
log_bin = mysql-bin       # 开启二进制日志，记录更改的语句
binlog_format = ROW
expire_logs_days = 30
#relay-log=mysql-relay
skip-host-cache
skip-name-resolve
collation-server = utf8_unicode_ci
init-connect='SET NAMES utf8'
character-set-server = utf8
datadir         = /var/lib/mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
datadir         = /var/lib/mysql
max_allowed_packet = 256M
explicit_defaults_for_timestamp = true
sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES
skip-ssl
secure-file-priv = NULL
lower_case_table_names = 1
back_log = 300
max_connections = 3000
max_connect_errors = 100
table_open_cache = 4096
external-locking = FALSE
sort_buffer_size = 16M
join_buffer_size = 16M
thread_cache_size = 64
query_cache_size = 128M
query_cache_limit = 4M
ft_min_word_len = 8
thread_stack = 512K
transaction_isolation = REPEATABLE-READ
tmp_table_size = 128M
max_heap_table_size = 128M
#user = mysql
tmpdir = /tmp
innodb_temp_data_file_path = ibtmp1:12M:autoextend:max:5G
###*** slow query parameters
slow_query_log = 1       #是否启用慢查询日志，1为启用，0为禁用
slow_query_log_file = slow.log       #指定慢查询日志文件的路径和名字，可使用绝对路径指定；默认值是'主机名_slow.log'，位于datadir目录
long_query_time = 10     #SQL语句运行时间阈值，执行时间大于参数值的语句才会被记录下来
min_examined_row_limit = 100     #SQL语句检测的记录数少于设定值的语句不会被记录到慢查询日志，即使这个语句执行时间超过了long_query_time的阈值
log_queries_not_using_indexes = 1   #将没有使用索引的语句记录到慢查询日志
log_throttle_queries_not_using_indexes = 10     #设定每分钟记录到日志的未使用索引的语句数目，超过这个数目后只记录语句数量和花费的总时间
log-slow-admin-statements = 1    #记录执行缓慢的管理SQL，如alter table,analyze table, check table, create index, drop index, optimize table, repair table等。
log_slow_slave_statements = 0    #记录从库上执行的慢查询语句
log_timestamps = system     #5.7版本新增时间戳所属时区参数，默认记录UTC时区的时间戳到慢查询日志，应修改为记录系统时区
log_output = FILE,TABLE     #指定慢查询日志的输出方式，从5.5版本开始可以记录到日志文件(FILE，慢查询日志)和数据库表(TABLE，mysql.slow_log)中

[mysqldump]
quick
max_allowed_packet = 256M

[mysqld_safe]
open-files-limit = 8192
